<!DOCTYPE html>
<html>

<head>
   <meta charset="utf-8" />
   <meta http-equiv="X-UA-Compatible" content="IE=edge" />
   <title>Ashow</title>
   <meta name="viewport" content="width=device-width, initial-scale=1" />
   <link rel="stylesheet" type="text/css" href="../assets/css/header.css" />
   <link rel="stylesheet" type="text/css" href="../assets/css/footer.css" />
   <link rel="shortcut icon" href="/assets/img/Logo.png" />
   <script src="https://kit.fontawesome.com/fe733bce8f.js"></script>
   <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.4.1/jquery.min.js"></script>
</head>

<header>
   <section id="logo">
      <a href="#"><img src="/assets/img/ashowLogoTextWhite.png" alt="logo" /></a>
   </section>
   <section id="search">
      <input type="text" placeholder="Buscar..." />
      <button type="submit">
         <i class="fas fa-search fa-2x"></i>
      </button>
   </section>
   <section id="user-menu">
      <button class="dropbtn">
         <i class="fas fa-user fa-2x"></i> Usuario
         <i class="fa fa-chevron-up rotate"></i>
      </button>
      <nav class="dropdown-content">
         <a href="#">Link 1</a>
         <a href="#">Link 2</a>
         <a href="#">Link 3</a>
      </nav>
   </section>
   <section id="notification">
      <a href="#">
         <i class="fas fa-bell fa-2x">
            <div class="circle"></div>
         </i></a>
   </section>
</header>

<body>
   <form action="#" id="formEvent">
      <div class="input-field">
         <label for="">De um nome para o evento:</label>
         <input type="text" id="name" required />
      </div>
      <div class="input-field">
         <label for="">Tipo do evento:</label>
         <input type="text" id="eventType" required />
      </div>
      <div class="input-field">
         <label for="">Data:</label>
         <input type="date" id="date" required />
      </div>
      <label for="">Endereço:</label>
      <div class="input-field">
         <label for="">CEP:</label>
         <input type="text" id="CEP" required />
      </div>
      <div class="input-field">
         <label for="">Rua/Av.:</label>
         <input type="text" id="street" required />
      </div>
      <div class="input-field">
         <label for="">Número:</label>
         <input type="text" id="number" required />
      </div>
      <div class="input-field">
         <label for="">Bairro:</label>
         <input type="text" id="district" required />
      </div>
      <div class="input-field">
         <label for="">Cidade:</label>
         <input type="text" id="city" required />
      </div>
      <div class="input-field">
         <label for="">Estado:</label>
         <input type="text" id="state" required />
      </div>
      <div class="input-field">
         <label for="">Complemento:</label>
         <input type="text" id="complement" required />
      </div>
      <div class="input-field">
         <label for="">Quantidade de pessoas esperadas:</label>
         <input type="text" id="peopleQnt" required />
      </div>
      <div class="input-field">
         <label for="">Valor medio por artista:</label>
         <input type="text" id="artistValue" />
      </div>
      <input type="submit" value="Cadastrar" id="cadastrarEventoBtn">
   </form>
   <script>
      const InitCadastroEvento = () => {
         const form = $('#formEvent');
         const name = $("#name");
         const eventType = $("#eventType");
         const date = $("#date");
         const CEP = $("#CEP");
         const street = $("#street");
         const number = $("#number");
         const district = $("#district");
         const city = $("#city");
         const state = $("#state");
         const complement = $("#complement");
         const peopleQnt = $("#peopleQnt");
         const artistValue = $("#artistValue");
         const btnCadastrar = $("#cadastrarEventoBtn");

         CEP.change(() => {
            street.val("");
            district.val("");
            city.val("");
            state.val("");
            $.getJSON("https://viacep.com.br/ws/" + CEP.val() + "/json/", function (dados) {

               if (!("erro" in dados)) {
                  //Atualiza os campos com os valores da consulta.
                  street.val(dados.logradouro);
                  district.val(dados.bairro);
                  city.val(dados.localidade);
                  state.val(dados.uf);
               }
            });
         })

         btnCadastrar.click(function () {
            if (form[0].checkValidity()) {
               var dadosCadastro = {
                  "name": name.val(),
                  "eventType": eventType.val(),
                  "date": date.val(),
                  "CEP": CEP.val(),
                  "street": street.val(),
                  "number": number.val(),
                  "district": district.val(),
                  "city": city.val(),
                  "state": state.val(),
                  "complement": complement.val(),
                  "peopleQnt": peopleQnt.val(),
                  "artistValue": artistValue.val()
               };


               console.log(dadosCadastro)
            };
         });
      };

      InitCadastroEvento();
   </script>
</body>

<footer>
   <section id="contact">
      <p>Contato:</p>
      <a href="#">Numero: (XX) XXXXX-XXXXX</a>
      <a href="#">Emal: XXXXXXXX@XXXXX.com.br</a>
   </section>
   <section id="social-media">
      <a href="#"><i class="fab fa-whatsapp fa-2x"></i></a>
      <a href="#"><i class="fab fa-facebook-square fa-2x"></i></a>
      <a href="#"><i class="fab fa-instagram fa-2x"></i></a>
      <a href="#"><i class="fab fa-youtube fa-2x"></i></a>
      <a href="#"><i class="fab fa-linkedin fa-2x"></i></a>
   </section>
   <section id="copyRight">Copyright 2019 (c) ASHOW</section>
</footer>

</html>
